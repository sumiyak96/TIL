# 💻 CS61C Lecture 04.1 & 04.2 – C Pointers: Basics and Effective Usage

---

## 🌟 今回のテーマ / Today's Focus

- ポインタの基礎概念と使い方
- ポインタ系で発生するバグ
- 構造体(`struct`) や `sizeof` の概念
- Java との違い

---

## ✅ Lecture 04.1: Pointers and Bugs

### ▶ 基本のポインタ構造

- **ポインタは「別の変数のメモリアドレスを持つ変数」**
- `int *p;` は "pはintを持つポインタ"
- `p = &x;` でxのアドレスをpに付与
- `*p` はディリファレンス: ポインタを通して値を取得

### ▶ ポインタの使用例

```c
int x = 3;
int *p = &x;
*p = 5;  // x は5になる
```

- 位置を渡すと、関数内で元の変数を更新可能
- Javaのような値渡しだけだと更新は可能でない

### ▶ 注意点

- 初期化されていないポインタは「ガベージ」とよばれる不定値
- これを追うと不正なメモリアクセスでバグの原因に

---

## ✅ Lecture 04.2: Using Pointers Effectively

### ▶ ポインタの有効利用

- 同じ型の値を持つ変数の間でポインタを切り替えられる
- `void *` で型の不明なポインタも作成可能
- ポインタを通じて関数を参照渡しにし、元の値を更新できる

### ▶ 構造体(struct) とポインタ

```c
struct Point {
    int x;
    int y;
};

struct Point p1, p2;
struct Point *ptr = &p1;
ptr->x = 10; // アロー演算子
```

- `->` はポインタ経由で構造体のメンバーへアクセス

### ▶ null ポインタ

- 初期化値として便利
- 「何も持たない」という意味
- これを追うとバグ

### ▶ sizeof

- 型や変数が使用するメモリサイズをバイト単位で返す

```c
sizeof(int); // 例: 4
sizeof(struct Point); // メンバーの配置により8になることも
```

- 配置はワード協定 (例: 4バイト単位で配置)

---

## 🧐 Java との違い (Pointers / Structs)

| 機能            | C                                                  | Java                            |
|-------------------------|-----------------------------------------------------|----------------------------------|
| ポインタ            | 縦線型にメモリアドレスを持つ       | 要素はすべて参照型             |
| 構造体(`struct`)  | 値を持つシンプルなデータ型         | クラスを使った抽象化         |
| 変数互換       | 値のコピー。値のコピーが起きる | 参照のコピーのみ               |
| `sizeof`               | メモリサイズをバイト単位で取得   | 仕様上、利用不可                  |

---

## 🕵️ Takeaways

- ポインタを用いると関数で元の値を変えられる
- ただし、正しい初期化がないとバグの元になる
- `struct` は「クラスなしのデータオブジェクト」
- `sizeof` で型や構造体のメモリサイズを調べられる
- Java よりもローレベルで縁旨な操作が可能

---

## 📆 Coming Up Next

- 配列 (Arrays)の内部構造
- C の文字列 (ストリング) はなぜムズかしいのか？

